{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\ismse\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\ismse\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\ismse\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\SERGO\\\\Desktop\\\\ismse\\\\src\\\\pages\\\\Home.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\"; // import { ToastContainer, toast } from 'react-toastify'; // https://fkhadra.github.io/react-toastify/introduction/\n\nimport toast, { Toaster } from 'react-hot-toast'; // https://react-hot-toast.com/docs\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ArrowUpwardRoundedIcon from '@material-ui/icons/ArrowUpwardRounded';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport Grid from \"@material-ui/core/Grid\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\"; // import ListItemText from \"@material-ui/core/ListItemText\";\n\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport MainComponent from \"../components/MainComponent/MainComponent.jsx\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToAppOutlined\";\nimport Box from \"@material-ui/core/Box\"; // import TextField from \"@material-ui/core/TextField\";\n// import KcAdminClient from \"keycloak-admin\";\n\nimport CloseIcon from \"@material-ui/icons/Close\"; // import Button from \"@material-ui/core/Button\";\n\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport { useKeycloak } from \"../lib\";\nimport swal from \"sweetalert\"; // https://sweetalert.js.org/guides/\n\nimport Button from \"@material-ui/core/Button\";\nimport { Paper, Table, TableHead, TableBody, TableRow, TableCell } from \"@material-ui/core\";\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport Modal from \"@material-ui/core/Modal\"; // import { createFolders } from \"@linways/table-to-excel\";\n\nimport Card from \"@material-ui/core/Card\";\nimport LinearProgress from '@material-ui/core/LinearProgress'; // import CloudUploadIcon from '@material-ui/icons/CloudUpload';\n\nimport SaveIcon from '@material-ui/icons/Save';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport ScannerIcon from '@material-ui/icons/Scanner';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport SearchIcon from '@material-ui/icons/Search';\n\nfunction TabPanel(props) {\n  const children = props.children,\n        currentTab = props.currentTab,\n        selectedTab = props.selectedTab,\n        other = _objectWithoutProperties(props, [\"children\", \"currentTab\", \"selectedTab\"]);\n\n  return React.createElement(Typography, Object.assign({\n    component: \"div\",\n    role: \"tabpanel\",\n    hidden: currentTab !== selectedTab,\n    id: \"scrollable-auto-tabpanel-\".concat(selectedTab),\n    \"aria-labelledby\": \"scrollable-auto-tab-\".concat(selectedTab)\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(Box, {\n    p: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, children));\n}\n\nfunction a11yProps(id) {\n  return {\n    id: \"scrollable-auto-tab-\".concat(id),\n    \"aria-controls\": \"scrollable-auto-tabpanel-\".concat(id)\n  };\n}\n\nvar HashMap = require(\"hashmap\");\n\nconst drawerWidth = 260;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  toolbar: {\n    paddingRight: 24 // keep right padding when drawer closed\n\n  },\n  toolbarIcon: _objectSpread({\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\"\n  }, theme.mixins.toolbar),\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: \"calc(100% - \".concat(drawerWidth, \"px)\"),\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: 36\n  },\n  menuButtonHidden: {\n    display: \"none\"\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9)\n    }\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\"\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\"\n  },\n  imagePaper: {\n    position: \"fixed\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  modal: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\nconst useStylesnav = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  listItemText: {\n    fontSize: 13,\n    paddingLeft: \"2px\"\n  },\n  level1: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 25\n  },\n  level2: {\n    paddingLeft: theme.spacing(2),\n    maxHeight: 25\n  },\n  level3: {\n    paddingLeft: theme.spacing(4),\n    maxHeight: 25\n  },\n  tabs: {\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  }\n}));\n\nfunction getHrefStyleTop() {\n  const bottom = 7;\n  const right = 2;\n  return {\n    bottom: \"\".concat(bottom, \"%\"),\n    right: \"\".concat(right, \"%\"),\n    transform: \"translate(-\".concat(bottom, \"%, -\").concat(right, \"%)\")\n  };\n}\n\nfunction getHrefStyleBottom() {\n  const bottom = 2;\n  const right = 2;\n  return {\n    bottom: \"\".concat(bottom, \"%\"),\n    right: \"\".concat(right, \"%\"),\n    transform: \"translate(-\".concat(bottom, \"%, -\").concat(right, \"%)\")\n  };\n}\n\nvar scannedImages = [];\nvar scannedBlobs = [];\nvar loadedImages = [];\nvar selectedTabDocId = null;\nvar selectedImg = {};\nvar showImage = null;\nexport default (() => {\n  const _useKeycloak = useKeycloak(),\n        keycloak = _useKeycloak.keycloak; // This.state\n\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        selectedTab = _useState2[0],\n        setSelectedTab = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        tabs = _useState4[0],\n        setTabs = _useState4[1]; // const [endpoint] = useState(\"ws://192.168.0.64:3120\")//Server\n\n\n  const _useState5 = useState(\"ws://localhost:3320\"),\n        _useState6 = _slicedToArray(_useState5, 1),\n        endpoint = _useState6[0]; //Local\n\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        routes = _useState8[0],\n        setRoutes = _useState8[1];\n\n  const _useState9 = useState(null),\n        _useState10 = _slicedToArray(_useState9, 2),\n        session_id = _useState10[0],\n        setSession_id = _useState10[1];\n\n  const _useState11 = useState(null),\n        _useState12 = _slicedToArray(_useState11, 2),\n        webSocketMessage = _useState12[0],\n        setWebSocketMessage = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        currTaskId = _useState14[0],\n        setCurrTaskId = _useState14[1]; // const [SOAT, setSOAT] = useState(null)\n\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        opennav = _useState16[0],\n        setOpennav = _useState16[1];\n\n  const _useState17 = useState(true),\n        _useState18 = _slicedToArray(_useState17, 2),\n        openDrawer = _useState18[0],\n        setOpenDrawer = _useState18[1];\n\n  const _useState19 = useState(null),\n        _useState20 = _slicedToArray(_useState19, 2),\n        processInfo = _useState20[0],\n        setProcessInfo = _useState20[1];\n\n  const _useState21 = useState(1),\n        _useState22 = _slicedToArray(_useState21, 2),\n        tabCounter = _useState22[0],\n        setTabCounter = _useState22[1];\n\n  const _useState23 = useState([]),\n        _useState24 = _slicedToArray(_useState23, 2),\n        menuItemStates = _useState24[0],\n        setMenuItemStates = _useState24[1];\n\n  const _useState25 = useState(null),\n        _useState26 = _slicedToArray(_useState25, 2),\n        socket = _useState26[0],\n        setSocket = _useState26[1];\n\n  const _useState27 = useState(null),\n        _useState28 = _slicedToArray(_useState27, 2),\n        tabData = _useState28[0],\n        setTabData = _useState28[1]; // User\n\n\n  const _useState29 = useState(null),\n        _useState30 = _slicedToArray(_useState29, 2),\n        userId = _useState30[0],\n        setUserId = _useState30[1];\n\n  const _useState31 = useState(null),\n        _useState32 = _slicedToArray(_useState31, 2),\n        organizationId = _useState32[0],\n        setOrganizationId = _useState32[1];\n\n  const _useState33 = useState(null),\n        _useState34 = _slicedToArray(_useState33, 2),\n        userRole = _useState34[0],\n        setUserRole = _useState34[1];\n\n  const _useState35 = useState(null),\n        _useState36 = _slicedToArray(_useState35, 2),\n        userName = _useState36[0],\n        setUserName = _useState36[1]; // Scanner\n\n\n  const _useState37 = useState(false),\n        _useState38 = _slicedToArray(_useState37, 2),\n        showScanComponent = _useState38[0],\n        setShowScanComponent = _useState38[1];\n\n  const _useState39 = useState(false),\n        _useState40 = _slicedToArray(_useState39, 2),\n        connectionFailed = _useState40[0],\n        setConnectionFailed = _useState40[1];\n\n  const _useState41 = useState(null),\n        _useState42 = _slicedToArray(_useState41, 2),\n        updateState = _useState42[0],\n        setUpdateState = _useState42[1];\n\n  const _useState43 = useState(false),\n        _useState44 = _slicedToArray(_useState43, 2),\n        openModal = _useState44[0],\n        setOpenModal = _useState44[1];\n\n  const _useState45 = useState(false),\n        _useState46 = _slicedToArray(_useState45, 2),\n        showLoading = _useState46[0],\n        setShowLoading = _useState46[1];\n\n  const _useState47 = useState(false),\n        _useState48 = _slicedToArray(_useState47, 2),\n        warningShowed = _useState48[0],\n        setWarningShowed = _useState48[1];\n\n  const _useState49 = useState(getHrefStyleTop),\n        _useState50 = _slicedToArray(_useState49, 1),\n        hrefStyleTop = _useState50[0];\n\n  const _useState51 = useState(getHrefStyleBottom),\n        _useState52 = _slicedToArray(_useState51, 1),\n        hrefStyleBottom = _useState52[0];\n\n  const classes = useStyles();\n  const classesnav = useStylesnav();\n\n  const handleDrawerOpen = () => {\n    setOpenDrawer(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpenDrawer(false);\n  };\n\n  const handleOpenModal = () => {\n    setOpenModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setOpenModal(false);\n  }; // Main socket connection and data receiving\n\n\n  if (socket === null && userRole !== null) {\n    setSocket(new WebSocket(endpoint));\n  }\n\n  if (socket !== null) {\n    socket.onmessage = async function (message) {\n      var incomingJson = JSON.parse(message.data);\n      console.log(\"Socket message\", incomingJson);\n\n      if (incomingJson.messageType === \"session_id\") {\n        setSession_id(incomingJson.session_id);\n        socket.send(JSON.stringify({\n          commandType: \"userRole\",\n          userRole: userRole,\n          \"session_id\": incomingJson.session_id,\n          \"userId\": userId\n        }));\n        console.log(\"session_id\", incomingJson.session_id);\n      } else if (incomingJson.messageType === \"Menu\") {\n        setRoutes(incomingJson.routes); // console.log(\"Menu Items\", incomingJson)\n\n        let updatedMenuItemStates = menuItemStates.slice();\n\n        for (let i = 0; i < incomingJson.routes.length; i++) {\n          if (incomingJson.routes[i].level2 !== undefined) {\n            // console.log(\"menuItemStates\", incomingJson.routes[i].level2)\n            let name = incomingJson.routes[i].name;\n            let state = incomingJson.routes[i].state;\n            let newMenuItem = {\n              name: name,\n              state: state\n            };\n            updatedMenuItemStates.push(newMenuItem);\n\n            for (let l = 0; l < incomingJson.routes[i].level2.length; l++) {\n              if (incomingJson.routes[i].level2[l].level3 !== undefined) {\n                let name = incomingJson.routes[i].level2[l].name;\n                let newMenuItem2 = {\n                  name: name,\n                  state: state\n                };\n                updatedMenuItemStates.push(newMenuItem2);\n              }\n            }\n          }\n        }\n\n        setMenuItemStates(updatedMenuItemStates);\n        socket.send(JSON.stringify({\n          commandType: \"restoreSession\",\n          \"userId\": userId,\n          \"session_id\": session_id,\n          \"userRole\": userRole\n        }));\n      } else if (incomingJson.messageType === \"processInfo\") {\n        setProcessInfo(incomingJson); // console.log(\"processInfo\", incomingJson)\n      } else if (incomingJson.messageType === \"completeTask\") {\n        console.log(\"Task complited \", incomingJson);\n      } else if (incomingJson.messageType === \"userTask\") {\n        console.log(\"USER TASK\", incomingJson);\n\n        if (tabData.get(incomingJson.process_id) !== undefined) {\n          await clearTabData(incomingJson.process_id);\n        }\n\n        await tabData.set(incomingJson.process_id, incomingJson);\n        await setCurrTaskId(incomingJson.taskID);\n        await setWebSocketMessage(incomingJson);\n      } else if (incomingJson.messageType === \"restoreTab\") {\n        // console.log(\"EXISTED DATA\", tabData.get(incomingJson.process_id))\n        if (tabData.get(incomingJson.process_id) === undefined) {\n          await tabData.set(incomingJson.process_id, incomingJson);\n          let updatedTabs = tabs.slice();\n          updatedTabs.push({\n            id: incomingJson.process_id,\n            name: incomingJson.process_id,\n            label: incomingJson.tabLabel + \" \" + tabCounter\n          });\n          await setTabs(updatedTabs);\n          await setSelectedTab(incomingJson.process_id);\n          await setTabCounter(tabCounter + 1);\n          await setCurrTaskId(incomingJson.taskID);\n          await setWebSocketMessage(incomingJson); // // console.log(\"restoreTab\", incomingJson)\n        }\n      } else if (incomingJson.messageType === \"error\") {\n        setWebSocketMessage(incomingJson);\n        console.log(\"webSocket ERROR\", incomingJson);\n        tabData.set(incomingJson.process_id, incomingJson);\n        setCurrTaskId(incomingJson.taskID);\n        handleCloseCurrentTab(incomingJson.process_id);\n      } else if (incomingJson.messageType === \"LoadImages\") {\n        // console.log(\"IMAGES FROM SOCKET\", incomingJson)\n        var base64Image = 'data:image/png;base64,' + incomingJson.content;\n        let incomigImg = {\n          item: React.createElement(\"img\", {\n            docId: incomingJson.docId,\n            name: incomingJson.name,\n            height: \"200\",\n            width: \"auto\",\n            src: base64Image,\n            onClick: () => loadedImgClick(incomingJson.name),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 347\n            },\n            __self: this\n          })\n        };\n        loadedImages.push(incomigImg);\n        setShowLoading(false);\n        let newId = getUUID();\n        setUpdateState(newId);\n      } else if (incomingJson.messageType === \"notification\") {\n        setShowLoading(false);\n        swal({\n          text: incomingJson.text,\n          icon: incomingJson.icon\n        });\n      } else if (incomingJson.messageType === \"toast\") {\n        if (incomingJson.toastType === \"success\") {\n          callSuccessToast(incomingJson.toastText);\n        } else if (incomingJson.toastType === \"error\") {\n          console.log(\"ERR TOAST\", incomingJson.toastText);\n          callErrorToast(incomingJson.toastText);\n        }\n      } else {\n        console.log(\"Unknown RESTMessage\", incomingJson);\n      }\n    };\n\n    socket.onclose = function (er) {\n      console.log(\"CONNECTION CLOSED \");\n      setSocket(null);\n    };\n  } // Functions of Document Scanner\n  // Keep updated doc id of selected tab document\n\n\n  if (selectedTab !== null) {\n    let selectedTabData = tabData.get(selectedTab);\n\n    if (selectedTabData !== undefined) {\n      let selectedTabDataDocId = selectedTabData.docId;\n      selectedTabDocId = selectedTabDataDocId; // console.log(\"DOC ID\", selectedTabDocId)\n    }\n  }\n\n  useEffect(() => {\n    // console.log(\"DOC ID\", selectedTabDocId)\n    setTabData(new HashMap()); // socket for scanner\n\n    var wsImpl = window.WebSocket || window.MozWebSocket;\n    window.ws = new wsImpl(\"ws://localhost:8181/\");\n\n    window.ws.onmessage = async function (e) {\n      if (e.data instanceof Blob) {\n        console.log(\"SCAN MSG\", e);\n        let f = e.data;\n        f.name = getUUID(); // await pushNewBlob(f)\n\n        await pushNewImage(e, f);\n      }\n    };\n\n    window.ws.onclose = function () {\n      setConnectionFailed(true);\n    };\n  }, []);\n\n  function callSuccessToast(text) {\n    // toast(text, {\n    //   position: \"top-right\",\n    //   autoClose: 6000,\n    //   hideProgressBar: false,\n    //   closeOnClick: true,\n    //   pauseOnHover: true,\n    //   draggable: true,\n    //   progress: undefined,\n    // })\n    toast.success(text, {\n      duration: 3000,\n      position: 'top-right'\n    });\n  }\n\n  function callErrorToast(text) {\n    // toast.error(text, {\n    //   position: \"top-right\",\n    //   autoClose: 7000,\n    //   hideProgressBar: false,\n    //   closeOnClick: true,\n    //   pauseOnHover: true,\n    //   draggable: true,\n    //   progress: undefined,\n    // })\n    toast.error(text, {\n      duration: 8000,\n      position: 'top-right'\n    });\n  }\n\n  async function pushNewImage(e, f) {\n    let reader = new FileReader();\n\n    reader.onload = async function (e) {\n      // console.log(\"WRITING IMAGES\")\n      // push new images to list and show in UI\n      let image = {\n        item: React.createElement(\"img\", {\n          docId: selectedTabDocId,\n          name: f.name,\n          height: \"200\",\n          width: \"auto\",\n          src: e.target.result,\n          onClick: () => scannedImgClick(f.name),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        })\n      };\n      scannedImages.push(image);\n      console.log(\"IMGLIST\", scannedImages);\n      let newId = getUUID();\n      setUpdateState(newId);\n    };\n\n    reader.readAsDataURL(f);\n  }\n\n  async function pushNewBlob(f) {\n    // console.log(\"WRITING BLOBS\")\n    var blobToBase64 = function (f, cb) {\n      let reader = new FileReader();\n\n      reader.onload = function () {\n        // converts blob to base64\n        var dataUrl = reader.result;\n        var base64 = dataUrl.split(\",\")[1];\n        cb(base64);\n      };\n\n      reader.readAsDataURL(f);\n    };\n\n    blobToBase64(f, async function (base64) {\n      // encode blobs to send to socket\n      let newBlob = {\n        \"docId\": selectedTabDocId,\n        \"name\": f.name,\n        \"blob\": base64,\n        \"size\": f.size\n      };\n      scannedBlobs.push(newBlob);\n      console.log(\"BLOBS\", scannedBlobs);\n    });\n  } // Handler of scanner buttons\n\n\n  function scannerButtonClick(name) {\n    if (name === \"scanImage\") {\n      if (scannedImages.length >= 7) {\n        swal({\n          text: \"Внимание, не сканируйте больше 7 документов за раз, сохранение может вызвать потерю сканированных файлов!\",\n          icon: \"warning\"\n        });\n        window.ws.send(\"1100\");\n      } else {\n        console.log(\"SCAN\", selectedTabDocId);\n        window.ws.send(\"1100\");\n      }\n    } else if (name === \"saveDocument\") {\n      if (Object.keys(scannedBlobs).length === 0) {\n        swal({\n          text: \"Нет файлов для сохранения!\",\n          icon: \"warning\"\n        });\n      } else {\n        let blobsToBeSaved = [];\n\n        for (let k = 0; k < scannedBlobs.length; k++) {\n          if (scannedBlobs[k].docId === selectedTabDocId) {\n            blobsToBeSaved.push(scannedBlobs[k]);\n          }\n        }\n\n        console.log(\"BLOBS TO SAVE\", blobsToBeSaved);\n        deleteSavedImages();\n        sendFieldValues({\n          commandType: \"saveImages\",\n          path: selectedTabDocId,\n          blobs: blobsToBeSaved,\n          docId: selectedTabDocId,\n          session_id: session_id\n        });\n        swal({\n          text: \"Процесс сохранения запущен, это займет некоторое время, дождитесь уведомления системы!\",\n          icon: \"success\"\n        });\n      }\n    } else if (name === \"loadPreviouslyScannedImages\") {\n      console.log(\"LOAD\", selectedTabDocId);\n      loadedImages = [];\n      sendFieldValues({\n        commandType: \"loadPreviouslyScannedImages\",\n        path: selectedTabDocId,\n        session_id: session_id,\n        docId: selectedTabDocId\n      });\n      setShowLoading(true);\n    }\n  }\n\n  function deleteSavedImages() {\n    // console.log(\"DELETE\", name)\n    let newList = [];\n    let newBlobs = [];\n\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.docId === selectedTabDocId) {\n        console.log(\"DELETE\", scannedImages[l].item.props.docId);\n      } else {\n        newList.push(scannedImages[l]);\n      }\n    }\n\n    for (let k = 0; k < scannedBlobs.length; k++) {\n      if (scannedBlobs[k].docId === selectedTabDocId) {\n        console.log(\"DELETE\", scannedBlobs[k].docId, selectedTabDocId);\n      } else {\n        newBlobs.push(scannedBlobs[k]);\n      }\n    }\n\n    scannedBlobs = newBlobs;\n    scannedImages = newList;\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function deleteScannedImage(item) {\n    // console.log(\"DELETE\", item.props.name)\n    let newList = [];\n    let newBlobs = [];\n\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.name === item.props.name) {\n        console.log(\"DELETE\", scannedImages[l].item.props.name, item.props.name);\n        loadedImages.push(scannedImages[l]);\n      } else {\n        newList.push(scannedImages[l]);\n      }\n    }\n\n    for (let k = 0; k < scannedBlobs.length; k++) {\n      if (scannedBlobs[k].name === item.props.name) {\n        console.log(\"DELETE\", scannedBlobs[k].name, item.props.name);\n      } else {\n        newBlobs.push(scannedBlobs[k]);\n      }\n    }\n\n    scannedBlobs = newBlobs;\n    scannedImages = newList;\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function deleteLoadedImage(item) {\n    // console.log(\"DELETE\", item.props.name)\n    swal({\n      text: \"Вы уверены что хотите удалить этот скан?\",\n      icon: \"warning\",\n      buttons: {\n        yes: \"Да\",\n        no: \"Отмена\"\n      }\n    }).then(click => {\n      if (click === \"yes\") {\n        let newList = [];\n\n        for (let l = 0; l < loadedImages.length; l++) {\n          if (loadedImages[l].item.props.name === item.props.name) {\n            console.log(\"DELETE\", loadedImages[l].item.props.name, item.props.name);\n            sendFieldValues({\n              commandType: \"deleteScannedImage\",\n              path: selectedTabDocId,\n              session_id: session_id,\n              fileName: loadedImages[l].item.props.name + \".png\"\n            });\n          } else {\n            newList.push(loadedImages[l]);\n          }\n        }\n\n        loadedImages = newList;\n        let newId = getUUID();\n        setUpdateState(newId);\n      }\n    });\n  }\n\n  function returnImageList() {\n    var imgs = [];\n\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.docId === selectedTabDocId) {\n        imgs.push(React.createElement(TableBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602\n          },\n          __self: this\n        }, React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 603\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 604\n          },\n          __self: this\n        }, scannedImages[l].item)), React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 608\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 609\n          },\n          __self: this\n        }, React.createElement(IconButton, {\n          onClick: () => deleteScannedImage(scannedImages[l].item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 610\n          },\n          __self: this\n        }, React.createElement(DeleteForeverIcon, {\n          fontSize: \"Large\",\n          style: {\n            color: \"black\",\n            margin: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 611\n          },\n          __self: this\n        }))))));\n      }\n    }\n\n    if (Object.keys(imgs).length !== 0) {\n      return React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"flex-start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, imgs);\n    }\n  }\n\n  function returnLoadedImageList() {\n    var imgs = [];\n\n    for (let l = 0; l < loadedImages.length; l++) {\n      if (loadedImages[l].item.props.docId === selectedTabDocId) {\n        imgs.push(React.createElement(TableBody, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 632\n          },\n          __self: this\n        }, React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 633\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 634\n          },\n          __self: this\n        }, loadedImages[l].item)), React.createElement(TableRow, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 638\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 639\n          },\n          __self: this\n        }, React.createElement(IconButton, {\n          onClick: () => deleteLoadedImage(loadedImages[l].item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 640\n          },\n          __self: this\n        }, React.createElement(DeleteForeverIcon, {\n          fontSize: \"Large\",\n          style: {\n            color: \"black\",\n            margin: 0\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 641\n          },\n          __self: this\n        }))))));\n      }\n    }\n\n    if (Object.keys(imgs).length !== 0) {\n      return React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"flex-start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651\n        },\n        __self: this\n      }, imgs);\n    }\n  }\n\n  function scannedImgClick(name) {\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.name === name) {\n        console.log(\"IMG\", scannedImages[l]);\n        selectedImg = {\n          name: scannedImages[l].item.props.name,\n          height: \"750\",\n          width: \"auto\",\n          src: scannedImages[l].item.props.src\n        };\n      }\n    }\n\n    handleOpenModal();\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function loadedImgClick(name) {\n    for (let l = 0; l < loadedImages.length; l++) {\n      if (loadedImages[l].item.props.name === name) {\n        console.log(\"IMG\", loadedImages[l]);\n        selectedImg = {\n          name: loadedImages[l].item.props.name,\n          height: \"750\",\n          width: \"auto\",\n          src: loadedImages[l].item.props.src\n        };\n      }\n    }\n\n    handleOpenModal();\n    let newId = getUUID();\n    setUpdateState(newId);\n  }\n\n  function showScanComponentClick() {\n    setShowScanComponent(true);\n  }\n\n  if (connectionFailed === true && showScanComponent === true && warningShowed === false) {\n    setWarningShowed(true);\n    swal({\n      text: \"Программа для сканирования не найдена на вашем компьютере. Пожалуйста, скачайте, установите и запустите программу, затем обновите страницу\",\n      icon: \"warning\"\n    });\n  }\n\n  const uploadFile = e => {\n    console.log(\"UPLOAD\", e.target.files[0]);\n    let nameId = getUUID();\n    let imgUrl = URL.createObjectURL(e.target.files[0]);\n    let image = {\n      item: React.createElement(\"img\", {\n        docId: selectedTabDocId,\n        name: nameId,\n        height: \"200\",\n        width: \"auto\",\n        src: imgUrl,\n        onClick: () => scannedImgClick(nameId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 703\n        },\n        __self: this\n      })\n    };\n    fetch(imgUrl).then(res => res.blob()).then(blob => {\n      let f = blob;\n      f.name = nameId;\n      pushNewBlob(f); // console.log(\"BL\", f)\n    });\n    scannedImages.push(image);\n    setUpdateState(nameId);\n  }; // End of Document scanner functions\n\n\n  function handleCloseCurrentTab(tabId) {\n    // await setSelectedTab(tabId)\n    var selectedTabData = tabData.get(tabId);\n\n    if (selectedTabData !== undefined) {\n      var commandJson = {\n        commandType: \"completeTask\",\n        session_id: selectedTabData.session_id,\n        process_id: selectedTabData.process_id,\n        taskID: selectedTabData.taskID,\n        variables: {\n          userAction: {\n            value: \"cancel\"\n          },\n          userId: {\n            value: userId\n          },\n          userRole: {\n            value: userRole\n          }\n        }\n      };\n\n      if (selectedTabData.taskType === \"showRegSearchForm\" || selectedTabData.taskType === \"showDetailedSearchForm\" || selectedTabData.taskType === \"showIPRSearchForm\" || selectedTabData.taskType === \"showChildRegSearchForm\" || selectedTabData.taskType === \"showChildDetailedSearchForm\" || selectedTabData.taskType === \"showChildIPRSearchForm\" || selectedTabData.taskType === \"searchChildDetailedForm\" || selectedTabData.taskType === \"searchAdultsDetailedForm\" || selectedTabData.taskType === \"showSearchUser\" || selectedTabData.taskType === \"showSearchAppealsForm\" || selectedTabData.taskType === \"showSearchComplaintsForm\" || selectedTabData.taskType === \"error\") {\n        sendFieldValues(commandJson);\n        closeTab(tabId);\n      } else if (selectedTabData.taskType === \"showRegForm\" && selectedTabData.formType === \"view\") {\n        sendFieldValues(commandJson);\n        closeTab(tabId);\n      } else if (selectedTabData.taskType === \"showPersonForm\" && selectedTabData.selectedDoc === null) {\n        sendFieldValues(commandJson);\n        closeTab(tabId);\n      } else handleOpenSwal(\"Вы действительно хотите закрыть вкладку?\", {\n        yes: \"Да\",\n        no: \"Нет\"\n      }, tabId);\n    }\n  } // Custom allert component\n\n\n  function handleOpenSwal(text, swalButtons, tabId) {\n    return swal({\n      text: text,\n      icon: \"warning\",\n      buttons: swalButtons\n    }).then(click => {\n      if (click === \"yes\") {\n        console.log(\"CLICK\", click);\n        handleCloseCurrentTabModal(tabId);\n      } else {\n        console.log(\"CLICK\", click);\n      }\n    });\n  } // Close current tab from opened alert component\n\n\n  function handleCloseCurrentTabModal(tabId) {\n    var selectedTabData = tabData.get(tabId);\n    var commandJson = {\n      commandType: \"completeTask\",\n      session_id: selectedTabData.session_id,\n      process_id: selectedTabData.process_id,\n      taskID: selectedTabData.taskID,\n      variables: {\n        userAction: {\n          value: \"cancel\"\n        },\n        userId: {\n          value: userId\n        },\n        userRole: {\n          value: userRole\n        }\n      }\n    }; // if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.docListIPR.length === 0){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.docListIPR === \"null\" && selectedTabData.formType === \"view\"){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else if(selectedTabData.taskType === \"showIPRForm\" && selectedTabData.userAction === \"ipr\" && selectedTabData.formType === \"edit\"){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else {\n\n    sendFieldValues(commandJson); // handleModalClose()\n\n    closeTab(tabId); // }\n    // else if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.formType === \"view\"){\n    //   alert(\"\")\n    // } \n  }\n\n  function sendFieldValues(commandJson) {\n    if (socket.readyState === socket.OPEN) {\n      clearTabData(commandJson.process_id);\n\n      if (commandJson.variables !== undefined) {\n        if (commandJson.variables[\"userAction\"][\"value\"] === \"cancel\") {\n          closeTab(selectedTab);\n          socket.send(JSON.stringify(commandJson));\n        } else if (commandJson.variables[\"authorization\"] !== undefined) {\n          commandJson.variables[\"authorization\"][\"value\"] = \"Bearer \" + keycloak.token;\n          socket.send(JSON.stringify(commandJson));\n          console.log(\"HOME AUTH\", commandJson);\n        } else {\n          socket.send(JSON.stringify(commandJson));\n          console.log(\"HOME SEND\", commandJson);\n        }\n      } else {\n        socket.send(JSON.stringify(commandJson));\n        console.log(\"HOME SEND\", commandJson);\n      }\n    } else {\n      // alert(\"Проблема с соединением повторная попытка...\")\n      setSocket(null);\n    }\n\n    setCurrTaskId(\"\");\n  } // wrap up menu items\n\n\n  function handleOpenMenuClick(name) {\n    // console.log(\"Event\", name)\n    for (var i = 0; i < menuItemStates.length; i++) {\n      if (menuItemStates[i].name === name) {\n        if (menuItemStates[i].state === true) {\n          menuItemStates[i].state = false;\n        } else {\n          menuItemStates[i].state = true;\n        }\n      }\n    }\n\n    setOpennav(!opennav);\n  } // launch process related to menu button\n\n\n  function handleMenuButtonClick(button) {\n    // console.log(\"Menu button clicked\", button)\n    if (button.name === \"ClearEnumData\" || button.name === \"Redeploy\") {\n      const commandJson = {\n        commandType: button.commandType,\n        userRole: userRole,\n        userId: userId\n      };\n      sendFieldValues(commandJson);\n    } else {\n      if (tabs.length >= 6) {\n        handleOpenSwal(\"ВНИМАНИЕ не открывайте более 6 вкладок это приводит к замедлению работы системы!\", {\n          ok: \"Ок\"\n        });\n      } else {\n        var process_id = getUUID();\n        let updatedTabs = tabs.slice();\n        updatedTabs.push({\n          id: process_id,\n          name: process_id,\n          label: button.parentLabel + \" \" + tabCounter\n        });\n        setTabs(updatedTabs);\n        setSelectedTab(process_id);\n        const commandJson = {\n          commandType: button.commandType,\n          processKey: button.processKey,\n          process_id: process_id,\n          session_id: session_id,\n          variables: {\n            user_session_id: {\n              value: session_id\n            },\n            process_id: {\n              value: process_id\n            },\n            userAction: {\n              value: \"findDocument\"\n            },\n            docDef: {\n              value: button.docDef\n            },\n            userId: {\n              value: userId\n            },\n            userRole: {\n              value: userRole\n            },\n            tabLabel: {\n              value: button.parentLabel\n            },\n            authorization: {\n              value: \"Bearer \" + keycloak.token\n            }\n          }\n        };\n        sendFieldValues(commandJson);\n        console.log(\"Menu Button \", commandJson);\n        setTabCounter(tabCounter + 1);\n      }\n    }\n  }\n\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\");\n\n    return uuidv1();\n  }\n\n  async function handleTabChange(event, newValue) {\n    setSelectedTab(newValue);\n    setShowScanComponent(false);\n    console.log(\"TAB CHANGE\", newValue);\n  }\n\n  function clearTabData(process_id) {\n    tabData.remove(process_id);\n    setCurrTaskId(\"\");\n    console.log(\"Clearing TabData\", tabData, \"ID\", process_id);\n  } // close selected tab clear it\"s data from cache & change tab counter\n\n\n  function closeTab(process_id) {\n    if (process_id !== undefined) {\n      console.log(\"Closing TAB\", process_id);\n      let updatedTabs = tabs.slice();\n\n      for (var i = 0; i < updatedTabs.length; i++) {\n        if (updatedTabs[i].id === process_id) {\n          // console.log(\"INDEX\", i)\n          updatedTabs.splice(i, 1);\n        }\n      }\n\n      if (updatedTabs[0] === undefined) {\n        setSelectedTab(null);\n        setTabCounter(1);\n      } else setSelectedTab(updatedTabs[0].id);\n\n      setTabs(updatedTabs);\n    } // console.log(\"Closing TAB\", process_id)\n\n\n    let updatedTabs = tabs.slice();\n\n    for (i = 0; i < updatedTabs.length; i++) {\n      if (updatedTabs[i].id === process_id) {\n        // console.log(\"INDEX\", i)\n        updatedTabs.splice(i, 1);\n      }\n    }\n\n    if (Object.keys(updatedTabs).length === 0) {\n      setSelectedTab(null);\n      setTabCounter(1);\n    } else {\n      setSelectedTab(updatedTabs[0].id);\n      setTabs(updatedTabs);\n    }\n  } // Creating Menu Levels 1-3\n\n\n  function getLevel1Items(level1, index) {\n    // console.log(\"Creating Menu menuItemStates\", menuItemStates)\n    if (level1.level2 === undefined) {\n      return React.createElement(ListItem, {\n        button: true,\n        className: classesnav.level1,\n        onClick: () => handleMenuButtonClick(level1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 957\n        },\n        __self: this\n      }, React.createElement(ExitToAppIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 962\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classesnav.listItemText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 964\n        },\n        __self: this\n      }, openDrawer === true ? level1.label : \"\"));\n    } else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level1.name) {\n          return React.createElement(List, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 972\n            },\n            __self: this\n          }, React.createElement(ListItem, {\n            button: true,\n            className: classesnav.level1,\n            onClick: () => handleOpenMenuClick(level1.name),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 973\n            },\n            __self: this\n          }, React.createElement(AddCircleIcon, {\n            style: {\n              height: 20,\n              width: 20\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 978\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: classesnav.listItemText,\n            style: {\n              \"fontWeight\": \"bold\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 980\n            },\n            __self: this\n          }, openDrawer === true ? level1.label : \"\"), menuItemStates[i].state === true ? React.createElement(ExpandLess, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 981\n            },\n            __self: this\n          }) : React.createElement(ExpandMore, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 981\n            },\n            __self: this\n          })), React.createElement(Collapse, {\n            in: menuItemStates[i].state,\n            timeout: \"auto\",\n            unmountOnExit: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 983\n            },\n            __self: this\n          }, level1.level2.map((level2Item, index) => getLevel2Items(level2Item, index))));\n        }\n      }\n    }\n  }\n\n  function getLevel2Items(level2, index) {\n    // console.log(\"Level2\", level2)\n    if (level2.level3 === undefined) {\n      return React.createElement(ListItem, {\n        button: true,\n        className: classesnav.level2,\n        onClick: () => handleMenuButtonClick(level2),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 998\n        },\n        __self: this\n      }, React.createElement(ExitToAppIcon, {\n        style: {\n          height: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1002\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classesnav.listItemText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1003\n        },\n        __self: this\n      }, openDrawer === true ? level2.label : \"\"));\n    } else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level2.name) {\n          return React.createElement(List, {\n            component: \"div\",\n            disablePadding: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1011\n            },\n            __self: this\n          }, React.createElement(ListItem, {\n            button: true,\n            className: classesnav.level2,\n            onClick: () => handleOpenMenuClick(level2.name),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1012\n            },\n            __self: this\n          }, React.createElement(AddCircleIcon, {\n            style: {\n              height: 20\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1016\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: classesnav.listItemText,\n            style: {\n              \"fontWeight\": \"bold\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1017\n            },\n            __self: this\n          }, openDrawer === true ? level2.label : \"\"), menuItemStates[i].state === true ? React.createElement(ExpandLess, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1018\n            },\n            __self: this\n          }) : React.createElement(ExpandMore, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1018\n            },\n            __self: this\n          })), React.createElement(Collapse, {\n            in: menuItemStates[i].state,\n            timeout: \"auto\",\n            unmountOnExit: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1020\n            },\n            __self: this\n          }, level2.level3.map((level3Item, index) => getLevel3Items(level3Item, index))));\n        }\n      }\n    }\n  }\n\n  function getLevel3Items(level3, index) {\n    return React.createElement(ListItem, {\n      button: true,\n      className: classesnav.level3,\n      onClick: () => handleMenuButtonClick(level3),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1033\n      },\n      __self: this\n    }, React.createElement(ExitToAppIcon, {\n      style: {\n        height: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1037\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: classesnav.listItemText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1038\n      },\n      __self: this\n    }, openDrawer === true ? level3.label : \"\"));\n  } // Getting authenticated user profile\n\n\n  if (userId === null) {\n    keycloak.loadUserProfile().success(function (profile) {\n      let curUserId = profile.attributes.userId[0];\n      let curOrganizationId = profile.attributes.organizationId[0];\n      let curUserRole = profile.attributes.userRole[0];\n      let curUserFirstName = profile.firstName;\n      let curUserLastName = profile.lastName;\n      let curUserName = curUserFirstName + \" \" + curUserLastName.substring(0, 1) + \".\";\n      setUserId(curUserId);\n      setOrganizationId(curOrganizationId);\n      setUserRole(curUserRole);\n      setUserName(curUserName);\n      console.log(\"PROFILE: \", profile);\n    }).error(function () {\n      console.log(\"Failed to load user profile\");\n    });\n  }\n\n  if (menuItemStates.length === 0) {\n    return React.createElement(\"div\", {\n      align: \"center\",\n      style: {\n        paddingTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1062\n      },\n      __self: this\n    }, React.createElement(CircularProgress, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1063\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1064\n      },\n      __self: this\n    }, \"loading...\"));\n  } // if (userId === null) return <div>No user</div>\n  // console.log(\"Home\", selectedTab)\n\n\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1071\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1072\n    },\n    __self: this\n  }), React.createElement(AppBar, {\n    position: \"absolute\",\n    className: clsx(classes.appBar, openDrawer && classes.appBarShift),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1073\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1074\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    edge: \"start\",\n    color: \"inherit\",\n    \"aria-label\": \"open drawer\",\n    onClick: handleDrawerOpen,\n    className: clsx(classes.menuButton, openDrawer && classes.menuButtonHidden),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1075\n    },\n    __self: this\n  }, React.createElement(MenuIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1082\n    },\n    __self: this\n  })), React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h6\",\n    color: \"inherit\",\n    noWrap: true,\n    className: classes.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1084\n    },\n    __self: this\n  }, \"\\u0418\\u0421\\u041C\\u0421\\u042D\\u041A\"), React.createElement(AccountCircleIcon, {\n    fontSize: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1087\n    },\n    __self: this\n  }), !!keycloak.authenticated && React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1089\n    },\n    __self: this\n  }, userName, React.createElement(IconButton, {\n    color: \"inherit\",\n    style: {\n      fontSize: 14\n    },\n    onClick: () => keycloak.logout(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1091\n    },\n    __self: this\n  }, \"\\u0412\\u044B\\u0439\\u0442\\u0438\")))), React.createElement(Drawer, {\n    variant: \"permanent\",\n    classes: {\n      paper: clsx(classes.drawerPaper, !openDrawer && classes.drawerPaperClose)\n    },\n    open: openDrawer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1098\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.toolbarIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1105\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    onClick: handleDrawerClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1106\n    },\n    __self: this\n  }, React.createElement(ChevronLeftIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1107\n    },\n    __self: this\n  }))), React.createElement(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1110\n    },\n    __self: this\n  }), routes.map((level1, index) => getLevel1Items(level1, index))), React.createElement(\"main\", {\n    className: classes.content,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1115\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    name: \"top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1116\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.appBarSpacer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1117\n    },\n    __self: this\n  }), React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1118\n    },\n    __self: this\n  }, React.createElement(AppBar, {\n    position: \"fixed\",\n    color: \"default\",\n    style: {\n      paddingTop: 60,\n      paddingLeft: openDrawer === true ? drawerWidth : 65\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1119\n    },\n    __self: this\n  }, React.createElement(Tabs, {\n    position: \"fixed\",\n    value: selectedTab,\n    onChange: handleTabChange,\n    indicatorColor: \"primary\",\n    textColor: \"primary\",\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    \"aria-label\": \"scrollable auto tabs example\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1120\n    },\n    __self: this\n  }, tabs.map((tab, index) => React.createElement(Tab, Object.assign({\n    key: tab.id,\n    label: React.createElement(\"div\", {\n      style: {\n        fontSize: 11\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1133\n      },\n      __self: this\n    }, tab.label, React.createElement(IconButton, {\n      onClick: () => handleCloseCurrentTab(tab.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1133\n      },\n      __self: this\n    }, React.createElement(CloseIcon, {\n      style: {\n        fontSize: \"medium\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1134\n      },\n      __self: this\n    }))),\n    value: tab.id\n  }, a11yProps(tab.id), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1131\n    },\n    __self: this\n  }))))), webSocketMessage !== null && tabs.map((tab, index) => React.createElement(TabPanel, {\n    position: \"fixed\",\n    currentTab: tab.id,\n    selectedTab: selectedTab,\n    key: tab.id,\n    style: {\n      paddingTop: 60,\n      paddingLeft: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1146\n    },\n    __self: this\n  }, React.createElement(MainComponent, {\n    userId: userId,\n    organizationId: organizationId,\n    userRole: userRole,\n    selectedTab: selectedTab,\n    showScanComponent: showScanComponent,\n    id: tab.id,\n    key: tab.id,\n    adminMessage: tabData.get(tab.id),\n    sendFieldValues: sendFieldValues,\n    handleCloseCurrentTab: handleCloseCurrentTab,\n    clearTabData: clearTabData,\n    showScanComponentClick: showScanComponentClick,\n    callSuccessToast: callSuccessToast,\n    callErrorToast: callErrorToast // closeTab = {closeTab}\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1153\n    },\n    __self: this\n  }))), showScanComponent === true && React.createElement(\"div\", {\n    id: \"scanner\",\n    style: {\n      paddingLeft: 40,\n      paddingBottom: 40,\n      paddingRight: 40\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1175\n    },\n    __self: this\n  }, connectionFailed === false && React.createElement(Button, {\n    id: \"1234\",\n    variant: \"outlined\",\n    onClick: () => scannerButtonClick(\"scanImage\"),\n    style: {\n      margin: 3,\n      backgroundColor: \"#D3D3FE\"\n    },\n    startIcon: React.createElement(ScannerIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1185\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1177\n    },\n    __self: this\n  }, \"\\u0421\\u043A\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"), connectionFailed === true && React.createElement(Button, {\n    component: \"a\",\n    href: \"../Scan_App_SetUp.msi\",\n    download: true,\n    variant: \"outlined\",\n    style: {\n      margin: 3,\n      backgroundColor: \"#D3D3FE\"\n    },\n    startIcon: React.createElement(GetAppIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1199\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1190\n    },\n    __self: this\n  }, \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"), React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: () => scannerButtonClick(\"saveDocument\"),\n    style: {\n      margin: 3,\n      backgroundColor: \"#D1FBD1\"\n    },\n    startIcon: React.createElement(SaveIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1210\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1203\n    },\n    __self: this\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"), React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: () => scannerButtonClick(\"loadPreviouslyScannedImages\"),\n    style: {\n      margin: 3,\n      backgroundColor: \"#D1FBD1\"\n    },\n    startIcon: React.createElement(CloudDownloadIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1220\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1213\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0440\\u0430\\u043D\\u0435\\u0435 \\u043E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B\\u0435\"), React.createElement(\"input\", {\n    accept: \"image/*\",\n    className: classes.input,\n    id: \"contained-button-file\",\n    multiple: true,\n    type: \"file\",\n    onChange: uploadFile,\n    style: {\n      display: \"none\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1223\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: \"contained-button-file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1232\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"outlined\" // color=\"primary\" \n    ,\n    component: \"span\",\n    startIcon: React.createElement(SearchIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1237\n      },\n      __self: this\n    }),\n    style: {\n      margin: 3,\n      backgroundColor: \"#D1FBD1\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1233\n    },\n    __self: this\n  }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C\")), React.createElement(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1246\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    style: {\n      backgroundColor: \"#D3D3FE\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1247\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1248\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1249\n    },\n    __self: this\n  }, \"\\u041E\\u0442\\u0441\\u043A\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B\\u0435/\\u0437\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0444\\u0430\\u0439\\u043B\\u044B\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1252\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1253\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1254\n    },\n    __self: this\n  }, returnImageList())))), React.createElement(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1259\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    style: {\n      backgroundColor: \"#D3D3FE\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1260\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1261\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1262\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0444\\u0430\\u0439\\u043B\\u044B\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1265\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1266\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1267\n    },\n    __self: this\n  }, showLoading === true && React.createElement(Grid, {\n    container: true,\n    direction: \"row\",\n    justify: \"center\",\n    spacing: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1268\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1269\n    },\n    __self: this\n  }, React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1270\n    },\n    __self: this\n  }, React.createElement(LinearProgress, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1271\n    },\n    __self: this\n  })))), returnLoadedImageList())))), React.createElement(Modal, {\n    style: {\n      paddingLeft: \"500px\"\n    },\n    open: openModal,\n    onClose: handleCloseModal,\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1281\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.imagePaper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1288\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    name: selectedImg.name,\n    height: selectedImg.height,\n    width: \"auto\",\n    src: selectedImg.src,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1289\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1292\n    },\n    __self: this\n  }, showImage))), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1296\n    },\n    __self: this\n  }, \"Copyright © \", new Date().getFullYear(), \".\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1302\n    },\n    __self: this\n  }, React.createElement(Toaster, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1302\n    },\n    __self: this\n  })), React.createElement(IconButton, {\n    href: \"#top\",\n    style: hrefStyleTop,\n    className: classes.hrefStyleTop,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1303\n    },\n    __self: this\n  }, React.createElement(ArrowUpwardRoundedIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1304\n    },\n    __self: this\n  })), React.createElement(IconButton, {\n    href: \"#bottom\",\n    style: hrefStyleBottom,\n    className: classes.hrefStyleBottom,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1306\n    },\n    __self: this\n  }, React.createElement(ArrowDownwardIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1307\n    },\n    __self: this\n  })), React.createElement(\"a\", {\n    name: \"bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1309\n    },\n    __self: this\n  })));\n});","map":{"version":3,"sources":["C:\\Users\\SERGO\\Desktop\\ismse\\src\\pages\\Home.js"],"names":["React","useState","useEffect","clsx","toast","Toaster","makeStyles","CssBaseline","Drawer","AppBar","Toolbar","List","Typography","Divider","IconButton","ArrowUpwardRoundedIcon","ArrowDownwardIcon","Grid","MenuIcon","ChevronLeftIcon","ListItem","ListItemIcon","CircularProgress","Collapse","ExpandLess","ExpandMore","Tabs","Tab","MainComponent","AddCircleIcon","ExitToAppIcon","Box","CloseIcon","AccountCircleIcon","useKeycloak","swal","Button","Paper","Table","TableHead","TableBody","TableRow","TableCell","DeleteForeverIcon","Modal","Card","LinearProgress","SaveIcon","CloudDownloadIcon","ScannerIcon","GetAppIcon","SearchIcon","TabPanel","props","children","currentTab","selectedTab","other","a11yProps","id","HashMap","require","drawerWidth","useStyles","theme","root","display","toolbar","paddingRight","toolbarIcon","alignItems","justifyContent","padding","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","menuButtonHidden","title","flexGrow","drawerPaper","position","whiteSpace","drawerPaperClose","overflowX","spacing","breakpoints","up","appBarSpacer","content","height","overflow","paper","flexDirection","imagePaper","backgroundColor","palette","background","border","boxShadow","shadows","modal","useStylesnav","maxWidth","listItemText","fontSize","paddingLeft","level1","maxHeight","level2","level3","tabs","getHrefStyleTop","bottom","right","transform","getHrefStyleBottom","scannedImages","scannedBlobs","loadedImages","selectedTabDocId","selectedImg","showImage","keycloak","setSelectedTab","setTabs","endpoint","routes","setRoutes","session_id","setSession_id","webSocketMessage","setWebSocketMessage","currTaskId","setCurrTaskId","opennav","setOpennav","openDrawer","setOpenDrawer","processInfo","setProcessInfo","tabCounter","setTabCounter","menuItemStates","setMenuItemStates","socket","setSocket","tabData","setTabData","userId","setUserId","organizationId","setOrganizationId","userRole","setUserRole","userName","setUserName","showScanComponent","setShowScanComponent","connectionFailed","setConnectionFailed","updateState","setUpdateState","openModal","setOpenModal","showLoading","setShowLoading","warningShowed","setWarningShowed","hrefStyleTop","hrefStyleBottom","classes","classesnav","handleDrawerOpen","handleDrawerClose","handleOpenModal","handleCloseModal","WebSocket","onmessage","message","incomingJson","JSON","parse","data","console","log","messageType","send","stringify","commandType","updatedMenuItemStates","slice","i","length","undefined","name","state","newMenuItem","push","l","newMenuItem2","get","process_id","clearTabData","set","taskID","updatedTabs","label","tabLabel","handleCloseCurrentTab","base64Image","incomigImg","item","docId","loadedImgClick","newId","getUUID","text","icon","toastType","callSuccessToast","toastText","callErrorToast","onclose","er","selectedTabData","selectedTabDataDocId","wsImpl","window","MozWebSocket","ws","e","Blob","f","pushNewImage","success","error","reader","FileReader","onload","image","target","result","scannedImgClick","readAsDataURL","pushNewBlob","blobToBase64","cb","dataUrl","base64","split","newBlob","size","scannerButtonClick","Object","keys","blobsToBeSaved","k","deleteSavedImages","sendFieldValues","path","blobs","newList","newBlobs","deleteScannedImage","deleteLoadedImage","buttons","yes","no","then","click","fileName","returnImageList","imgs","color","margin","returnLoadedImageList","src","showScanComponentClick","uploadFile","files","nameId","imgUrl","URL","createObjectURL","fetch","res","blob","tabId","commandJson","variables","userAction","value","taskType","closeTab","formType","selectedDoc","handleOpenSwal","swalButtons","handleCloseCurrentTabModal","readyState","OPEN","token","handleOpenMenuClick","handleMenuButtonClick","button","ok","parentLabel","processKey","user_session_id","docDef","authorization","uuidv1","handleTabChange","event","newValue","remove","splice","getLevel1Items","index","map","level2Item","getLevel2Items","level3Item","getLevel3Items","loadUserProfile","profile","curUserId","attributes","curOrganizationId","curUserRole","curUserFirstName","firstName","curUserLastName","lastName","curUserName","substring","paddingTop","authenticated","logout","tab","paddingBottom","input","Date","getFullYear"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\n// import { ToastContainer, toast } from 'react-toastify'; // https://fkhadra.github.io/react-toastify/introduction/\nimport toast, { Toaster } from 'react-hot-toast'; // https://react-hot-toast.com/docs\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport List from \"@material-ui/core/List\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ArrowUpwardRoundedIcon from '@material-ui/icons/ArrowUpwardRounded';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport Grid from \"@material-ui/core/Grid\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n// import ListItemText from \"@material-ui/core/ListItemText\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport MainComponent from \"../components/MainComponent/MainComponent.jsx\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircleOutlineOutlined\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToAppOutlined\";\nimport Box from \"@material-ui/core/Box\";\n// import TextField from \"@material-ui/core/TextField\";\n// import KcAdminClient from \"keycloak-admin\";\nimport CloseIcon from \"@material-ui/icons/Close\";\n// import Button from \"@material-ui/core/Button\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport { useKeycloak } from \"../lib\";\nimport swal from \"sweetalert\" // https://sweetalert.js.org/guides/\nimport Button from \"@material-ui/core/Button\";\nimport { Paper, Table, TableHead, TableBody, TableRow, TableCell } from \"@material-ui/core\";\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport Modal from \"@material-ui/core/Modal\";\n// import { createFolders } from \"@linways/table-to-excel\";\nimport Card from \"@material-ui/core/Card\";\nimport LinearProgress from '@material-ui/core/LinearProgress';\n// import CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport ScannerIcon from '@material-ui/icons/Scanner';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport SearchIcon from '@material-ui/icons/Search';\n\nfunction TabPanel(props) {\n  const { children, currentTab, selectedTab, ...other } = props;\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={currentTab !== selectedTab}\n      id={`scrollable-auto-tabpanel-${selectedTab}`}\n      aria-labelledby={`scrollable-auto-tab-${selectedTab}`}\n      {...other}\n    >\n      <Box p={3}>{children}</Box>\n    </Typography>\n  )\n}\nfunction a11yProps(id) {\n  return {\n    id: `scrollable-auto-tab-${id}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${id}`\n  }\n}\nvar HashMap = require(\"hashmap\")\nconst drawerWidth = 260\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  toolbar: {\n    paddingRight: 24 // keep right padding when drawer closed\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    })\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  menuButton: {\n    marginRight: 36\n  },\n  menuButtonHidden: {\n    display: \"none\"\n  },\n  title: {\n    flexGrow: 1\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen\n    })\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9)\n    }\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\"\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\"\n  },\n  imagePaper: {\n    position: \"fixed\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  modal: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"1px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}))\n\nconst useStylesnav = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  listItemText: {\n    fontSize: 13,\n    paddingLeft: \"2px\",\n  },\n  level1: {\n    paddingLeft: theme.spacing(0),\n    maxHeight: 25\n  },\n  level2: {\n    paddingLeft: theme.spacing(2),\n    maxHeight: 25\n  },\n  level3: {\n    paddingLeft: theme.spacing(4),\n    maxHeight: 25\n  },\n  tabs: {\n    flexGrow: 1,\n    width: \"100%\",\n    backgroundColor: theme.palette.background.paper\n  }\n}))\nfunction getHrefStyleTop() {\n  const bottom = 7;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`,\n  };\n}\nfunction getHrefStyleBottom() {\n  const bottom = 2;\n  const right = 2;\n  return {\n    bottom: `${bottom}%`,\n    right: `${right}%`,\n    transform: `translate(-${bottom}%, -${right}%)`,\n  };\n}\n\nvar scannedImages = []\nvar scannedBlobs = []\nvar loadedImages = []\nvar selectedTabDocId = null\nvar selectedImg = {}\nvar showImage = null\nexport default () => {\n  const { keycloak } = useKeycloak();\n  // This.state\n  const [selectedTab, setSelectedTab] = useState(null)\n  const [tabs, setTabs] = useState([])\n  // const [endpoint] = useState(\"ws://192.168.0.64:3120\")//Server\n  const [endpoint] = useState(\"ws://localhost:3320\")//Local\n  const [routes, setRoutes] = useState([])\n  const [session_id, setSession_id] = useState(null)\n  const [webSocketMessage, setWebSocketMessage] = useState(null)\n  const [currTaskId, setCurrTaskId] = useState(\"\")\n  // const [SOAT, setSOAT] = useState(null)\n  const [opennav, setOpennav] = useState(false)\n  const [openDrawer, setOpenDrawer] = useState(true)\n  const [processInfo, setProcessInfo] = useState(null)\n  const [tabCounter, setTabCounter] = useState(1)\n  const [menuItemStates, setMenuItemStates] = useState([])\n  const [socket, setSocket] = useState(null)\n  const [tabData, setTabData] = useState(null)\n  // User\n  const [userId, setUserId] = useState(null)\n  const [organizationId, setOrganizationId] = useState(null)\n  const [userRole, setUserRole] = useState(null)\n  const [userName, setUserName] = useState(null)\n  // Scanner\n  const [showScanComponent, setShowScanComponent] = useState(false)\n  const [connectionFailed, setConnectionFailed] = useState(false)\n  const [updateState, setUpdateState] = useState(null)\n  const [openModal, setOpenModal] = useState(false)\n  const [showLoading, setShowLoading] = useState(false)\n  const [warningShowed, setWarningShowed] = useState(false)\n\n  const [hrefStyleTop] = useState(getHrefStyleTop)\n  const [hrefStyleBottom] = useState(getHrefStyleBottom)\n  const classes = useStyles()\n  const classesnav = useStylesnav()\n  const handleDrawerOpen = () => {\n    setOpenDrawer(true)\n  }\n  const handleDrawerClose = () => {\n    setOpenDrawer(false)\n  }\n  const handleOpenModal = () => {\n    setOpenModal(true)\n  }\n  const handleCloseModal = () => {\n    setOpenModal(false)\n  }\n\n  // Main socket connection and data receiving\n  if (socket === null && userRole !== null) {\n    setSocket(new WebSocket(endpoint))\n  }\n  if (socket !== null) {\n    socket.onmessage = async function (message) {\n      var incomingJson = JSON.parse(message.data)\n      console.log(\"Socket message\", incomingJson)\n      if (incomingJson.messageType === \"session_id\") {\n        setSession_id(incomingJson.session_id)\n        socket.send(JSON.stringify({ commandType: \"userRole\", userRole: userRole, \"session_id\": incomingJson.session_id, \"userId\": userId }))\n        console.log(\"session_id\", incomingJson.session_id)\n      }\n      else if (incomingJson.messageType === \"Menu\") {\n        setRoutes(incomingJson.routes)\n        // console.log(\"Menu Items\", incomingJson)\n        let updatedMenuItemStates = menuItemStates.slice()\n        for (let i = 0; i < incomingJson.routes.length; i++) {\n          if (incomingJson.routes[i].level2 !== undefined) {\n            // console.log(\"menuItemStates\", incomingJson.routes[i].level2)\n            let name = incomingJson.routes[i].name\n            let state = incomingJson.routes[i].state\n            let newMenuItem = {\n              name: name,\n              state: state\n            }\n            updatedMenuItemStates.push(newMenuItem)\n            for (let l = 0; l < incomingJson.routes[i].level2.length; l++) {\n              if (incomingJson.routes[i].level2[l].level3 !== undefined) {\n                let name = incomingJson.routes[i].level2[l].name\n                let newMenuItem2 = {\n                  name: name,\n                  state: state\n                }\n                updatedMenuItemStates.push(newMenuItem2)\n              }\n            }\n          }\n        }\n        setMenuItemStates(updatedMenuItemStates)\n        socket.send(JSON.stringify({ commandType: \"restoreSession\", \"userId\": userId, \"session_id\": session_id, \"userRole\": userRole }))\n      }\n      else if (incomingJson.messageType === \"processInfo\") {\n        setProcessInfo(incomingJson)\n        // console.log(\"processInfo\", incomingJson)\n      }\n      else if (incomingJson.messageType === \"completeTask\") {\n        console.log(\"Task complited \", incomingJson)\n      }\n      else if (incomingJson.messageType === \"userTask\") {\n        console.log(\"USER TASK\", incomingJson)\n        if (tabData.get(incomingJson.process_id) !== undefined) {\n          await clearTabData(incomingJson.process_id)\n        }\n        await tabData.set(incomingJson.process_id, incomingJson)\n        await setCurrTaskId(incomingJson.taskID)\n        await setWebSocketMessage(incomingJson)\n      }\n      else if (incomingJson.messageType === \"restoreTab\") {\n        // console.log(\"EXISTED DATA\", tabData.get(incomingJson.process_id))\n        if (tabData.get(incomingJson.process_id) === undefined) {\n          await tabData.set(incomingJson.process_id, incomingJson)\n          let updatedTabs = tabs.slice()\n          updatedTabs.push({ id: incomingJson.process_id, name: incomingJson.process_id, label: incomingJson.tabLabel + \" \" + tabCounter })\n          await setTabs(updatedTabs)\n          await setSelectedTab(incomingJson.process_id)\n          await setTabCounter(tabCounter + 1)\n          await setCurrTaskId(incomingJson.taskID)\n          await setWebSocketMessage(incomingJson)\n          // // console.log(\"restoreTab\", incomingJson)\n        }\n      }\n      else if (incomingJson.messageType === \"error\") {\n        setWebSocketMessage(incomingJson)\n        console.log(\"webSocket ERROR\", incomingJson)\n        tabData.set(incomingJson.process_id, incomingJson)\n        setCurrTaskId(incomingJson.taskID)\n        handleCloseCurrentTab(incomingJson.process_id)\n      }\n      else if (incomingJson.messageType === \"LoadImages\") {\n        // console.log(\"IMAGES FROM SOCKET\", incomingJson)\n        var base64Image = 'data:image/png;base64,' + incomingJson.content\n        let incomigImg = { item: <img docId={incomingJson.docId} name={incomingJson.name} height=\"200\" width=\"auto\" src={base64Image} onClick={() => loadedImgClick(incomingJson.name)} /> }\n        loadedImages.push(incomigImg)\n        setShowLoading(false)\n        let newId = getUUID()\n        setUpdateState(newId)\n      }\n      else if (incomingJson.messageType === \"notification\") {\n        setShowLoading(false)\n        swal({\n          text: incomingJson.text,\n          icon: incomingJson.icon\n        })\n      }\n      else if (incomingJson.messageType === \"toast\") {\n        if (incomingJson.toastType === \"success\") {\n          callSuccessToast(incomingJson.toastText)\n        }\n        else if (incomingJson.toastType === \"error\") {\n          console.log(\"ERR TOAST\", incomingJson.toastText)\n          callErrorToast(incomingJson.toastText)\n        }\n      }\n      else {\n        console.log(\"Unknown RESTMessage\", incomingJson)\n      }\n    }\n    socket.onclose = function (er) {\n      console.log(\"CONNECTION CLOSED \")\n      setSocket(null)\n    }\n  }\n\n  // Functions of Document Scanner\n  // Keep updated doc id of selected tab document\n  if (selectedTab !== null) {\n    let selectedTabData = tabData.get(selectedTab)\n    if (selectedTabData !== undefined) {\n      let selectedTabDataDocId = selectedTabData.docId\n      selectedTabDocId = selectedTabDataDocId\n      // console.log(\"DOC ID\", selectedTabDocId)\n    }\n  }\n  useEffect(() => {\n    // console.log(\"DOC ID\", selectedTabDocId)\n    setTabData(new HashMap())\n    // socket for scanner\n    var wsImpl = window.WebSocket || window.MozWebSocket\n    window.ws = new wsImpl(\"ws://localhost:8181/\")\n    window.ws.onmessage = async function (e) {\n      if (e.data instanceof Blob) {\n        console.log(\"SCAN MSG\", e)\n        let f = e.data\n        f.name = getUUID()\n        // await pushNewBlob(f)\n        await pushNewImage(e, f)\n      }\n    }\n    window.ws.onclose = function () {\n      setConnectionFailed(true)\n    }\n  }, [])\n\n  function callSuccessToast(text) {\n    // toast(text, {\n    //   position: \"top-right\",\n    //   autoClose: 6000,\n    //   hideProgressBar: false,\n    //   closeOnClick: true,\n    //   pauseOnHover: true,\n    //   draggable: true,\n    //   progress: undefined,\n    // })\n\n    toast.success(text, {\n      duration: 3000,\n      position: 'top-right',\n    });\n\n  }\n\n  function callErrorToast(text) {\n    // toast.error(text, {\n    //   position: \"top-right\",\n    //   autoClose: 7000,\n    //   hideProgressBar: false,\n    //   closeOnClick: true,\n    //   pauseOnHover: true,\n    //   draggable: true,\n    //   progress: undefined,\n    // })\n    toast.error(text, {\n      duration: 8000,\n      position: 'top-right',\n    });\n  }\n\n  async function pushNewImage(e, f) {\n    let reader = new FileReader()\n    reader.onload = async function (e) {\n      // console.log(\"WRITING IMAGES\")\n      // push new images to list and show in UI\n      let image = { item: <img docId={selectedTabDocId} name={f.name} height=\"200\" width=\"auto\" src={e.target.result} onClick={() => scannedImgClick(f.name)} /> }\n      scannedImages.push(image)\n      console.log(\"IMGLIST\", scannedImages)\n      let newId = getUUID()\n      setUpdateState(newId)\n    }\n    reader.readAsDataURL(f)\n  }\n  async function pushNewBlob(f) {\n    // console.log(\"WRITING BLOBS\")\n    var blobToBase64 = function (f, cb) {\n      let reader = new FileReader()\n      reader.onload = function () {\n        // converts blob to base64\n        var dataUrl = reader.result\n        var base64 = dataUrl.split(\",\")[1]\n        cb(base64)\n      }\n      reader.readAsDataURL(f)\n    }\n    blobToBase64(f, async function (base64) {\n      // encode blobs to send to socket\n      let newBlob = { \"docId\": selectedTabDocId, \"name\": f.name, \"blob\": base64, \"size\": f.size }\n      scannedBlobs.push(newBlob)\n      console.log(\"BLOBS\", scannedBlobs)\n    })\n  }\n  // Handler of scanner buttons\n  function scannerButtonClick(name) {\n    if (name === \"scanImage\") {\n      if (scannedImages.length >= 7) {\n        swal({\n          text: \"Внимание, не сканируйте больше 7 документов за раз, сохранение может вызвать потерю сканированных файлов!\",\n          icon: \"warning\"\n        })\n        window.ws.send(\"1100\")\n      }\n      else {\n        console.log(\"SCAN\", selectedTabDocId)\n        window.ws.send(\"1100\")\n      }\n    }\n    else if (name === \"saveDocument\") {\n      if (Object.keys(scannedBlobs).length === 0) {\n        swal({\n          text: \"Нет файлов для сохранения!\",\n          icon: \"warning\"\n        })\n      }\n      else {\n        let blobsToBeSaved = []\n        for (let k = 0; k < scannedBlobs.length; k++) {\n          if (scannedBlobs[k].docId === selectedTabDocId) {\n            blobsToBeSaved.push(scannedBlobs[k])\n          }\n        }\n        console.log(\"BLOBS TO SAVE\", blobsToBeSaved)\n        deleteSavedImages()\n        sendFieldValues({ commandType: \"saveImages\", path: selectedTabDocId, blobs: blobsToBeSaved, docId: selectedTabDocId, session_id: session_id })\n        swal({\n          text: \"Процесс сохранения запущен, это займет некоторое время, дождитесь уведомления системы!\",\n          icon: \"success\"\n        })\n      }\n    }\n    else if (name === \"loadPreviouslyScannedImages\") {\n      console.log(\"LOAD\", selectedTabDocId)\n      loadedImages = []\n      sendFieldValues({ commandType: \"loadPreviouslyScannedImages\", path: selectedTabDocId, session_id: session_id, docId: selectedTabDocId })\n      setShowLoading(true)\n    }\n  }\n  function deleteSavedImages() {\n    // console.log(\"DELETE\", name)\n    let newList = []\n    let newBlobs = []\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.docId === selectedTabDocId) {\n        console.log(\"DELETE\", scannedImages[l].item.props.docId)\n      }\n      else {\n        newList.push(scannedImages[l])\n      }\n    }\n    for (let k = 0; k < scannedBlobs.length; k++) {\n      if (scannedBlobs[k].docId === selectedTabDocId) {\n        console.log(\"DELETE\", scannedBlobs[k].docId, selectedTabDocId)\n      }\n      else {\n        newBlobs.push(scannedBlobs[k])\n      }\n    }\n    scannedBlobs = newBlobs\n    scannedImages = newList\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function deleteScannedImage(item) {\n    // console.log(\"DELETE\", item.props.name)\n    let newList = []\n    let newBlobs = []\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.name === item.props.name) {\n        console.log(\"DELETE\", scannedImages[l].item.props.name, item.props.name)\n        loadedImages.push(scannedImages[l])\n      }\n      else {\n        newList.push(scannedImages[l])\n      }\n    }\n    for (let k = 0; k < scannedBlobs.length; k++) {\n      if (scannedBlobs[k].name === item.props.name) {\n        console.log(\"DELETE\", scannedBlobs[k].name, item.props.name)\n      }\n      else {\n        newBlobs.push(scannedBlobs[k])\n      }\n    }\n    scannedBlobs = newBlobs\n    scannedImages = newList\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function deleteLoadedImage(item) {\n    // console.log(\"DELETE\", item.props.name)\n    swal({\n      text: \"Вы уверены что хотите удалить этот скан?\",\n      icon: \"warning\",\n      buttons: { yes: \"Да\", no: \"Отмена\" }\n    })\n      .then((click) => {\n        if (click === \"yes\") {\n          let newList = []\n          for (let l = 0; l < loadedImages.length; l++) {\n            if (loadedImages[l].item.props.name === item.props.name) {\n              console.log(\"DELETE\", loadedImages[l].item.props.name, item.props.name)\n              sendFieldValues({ commandType: \"deleteScannedImage\", path: selectedTabDocId, session_id: session_id, fileName: loadedImages[l].item.props.name + \".png\" })\n            }\n            else {\n              newList.push(loadedImages[l])\n            }\n          }\n          loadedImages = newList\n          let newId = getUUID()\n          setUpdateState(newId)\n        }\n      })\n\n  }\n  function returnImageList() {\n    var imgs = []\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.docId === selectedTabDocId) {\n        imgs.push(\n          <TableBody>\n            <TableRow>\n              <TableCell>\n                {scannedImages[l].item}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell align=\"center\">\n                <IconButton onClick={() => deleteScannedImage(scannedImages[l].item)}>\n                  <DeleteForeverIcon fontSize=\"Large\" style={{ color: \"black\", margin: 0 }} />\n                </IconButton>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        )\n      }\n    }\n    if (Object.keys(imgs).length !== 0) {\n      return (\n        <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\n          {imgs}\n        </Grid>\n      )\n    }\n  }\n  function returnLoadedImageList() {\n    var imgs = []\n    for (let l = 0; l < loadedImages.length; l++) {\n      if (loadedImages[l].item.props.docId === selectedTabDocId) {\n        imgs.push(\n          <TableBody>\n            <TableRow>\n              <TableCell>\n                {loadedImages[l].item}\n              </TableCell>\n            </TableRow>\n            <TableRow>\n              <TableCell align=\"center\">\n                <IconButton onClick={() => deleteLoadedImage(loadedImages[l].item)}>\n                  <DeleteForeverIcon fontSize=\"Large\" style={{ color: \"black\", margin: 0 }} />\n                </IconButton>\n              </TableCell>\n            </TableRow>\n          </TableBody>\n        )\n      }\n    }\n    if (Object.keys(imgs).length !== 0) {\n      return (\n        <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\n          {imgs}\n        </Grid>\n      )\n    }\n  }\n  function scannedImgClick(name) {\n    for (let l = 0; l < scannedImages.length; l++) {\n      if (scannedImages[l].item.props.name === name) {\n        console.log(\"IMG\", scannedImages[l])\n        selectedImg = {\n          name: scannedImages[l].item.props.name,\n          height: \"750\",\n          width: \"auto\",\n          src: scannedImages[l].item.props.src\n        }\n      }\n    }\n    handleOpenModal()\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function loadedImgClick(name) {\n    for (let l = 0; l < loadedImages.length; l++) {\n      if (loadedImages[l].item.props.name === name) {\n        console.log(\"IMG\", loadedImages[l])\n        selectedImg = {\n          name: loadedImages[l].item.props.name,\n          height: \"750\",\n          width: \"auto\",\n          src: loadedImages[l].item.props.src\n        }\n      }\n    }\n    handleOpenModal()\n    let newId = getUUID()\n    setUpdateState(newId)\n  }\n  function showScanComponentClick() {\n    setShowScanComponent(true)\n  }\n  if (connectionFailed === true && showScanComponent === true && warningShowed === false) {\n    setWarningShowed(true)\n    swal({\n      text: \"Программа для сканирования не найдена на вашем компьютере. Пожалуйста, скачайте, установите и запустите программу, затем обновите страницу\",\n      icon: \"warning\"\n    })\n  }\n  const uploadFile = e => {\n    console.log(\"UPLOAD\", e.target.files[0])\n    let nameId = getUUID()\n    let imgUrl = URL.createObjectURL(e.target.files[0])\n    let image = { item: <img docId={selectedTabDocId} name={nameId} height=\"200\" width=\"auto\" src={imgUrl} onClick={() => scannedImgClick(nameId)} /> }\n    fetch(imgUrl)\n      .then(res => res.blob())\n      .then(blob => {\n        let f = blob\n        f.name = nameId\n        pushNewBlob(f)\n        // console.log(\"BL\", f)\n      })\n    scannedImages.push(image)\n    setUpdateState(nameId)\n  }\n  // End of Document scanner functions\n\n  function handleCloseCurrentTab(tabId) {\n    // await setSelectedTab(tabId)\n    var selectedTabData = tabData.get(tabId)\n    if (selectedTabData !== undefined) {\n      var commandJson =\n      {\n        commandType: \"completeTask\",\n        session_id: selectedTabData.session_id,\n        process_id: selectedTabData.process_id,\n        taskID: selectedTabData.taskID,\n        variables: {\n          userAction: { value: \"cancel\" },\n          userId: { value: userId },\n          userRole: { value: userRole }\n        }\n      }\n      if (selectedTabData.taskType === \"showRegSearchForm\" ||\n        selectedTabData.taskType === \"showDetailedSearchForm\" ||\n        selectedTabData.taskType === \"showIPRSearchForm\" ||\n        selectedTabData.taskType === \"showChildRegSearchForm\" ||\n        selectedTabData.taskType === \"showChildDetailedSearchForm\" ||\n        selectedTabData.taskType === \"showChildIPRSearchForm\" ||\n        selectedTabData.taskType === \"searchChildDetailedForm\" ||\n        selectedTabData.taskType === \"searchAdultsDetailedForm\" ||\n        selectedTabData.taskType === \"showSearchUser\" ||\n        selectedTabData.taskType === \"showSearchAppealsForm\" ||\n        selectedTabData.taskType === \"showSearchComplaintsForm\" ||\n        selectedTabData.taskType === \"error\") {\n        sendFieldValues(commandJson)\n        closeTab(tabId)\n      }\n      else if (selectedTabData.taskType === \"showRegForm\" && selectedTabData.formType === \"view\") {\n        sendFieldValues(commandJson)\n        closeTab(tabId)\n      }\n      else if (selectedTabData.taskType === \"showPersonForm\" && selectedTabData.selectedDoc === null) {\n        sendFieldValues(commandJson)\n        closeTab(tabId)\n      }\n      else handleOpenSwal(\"Вы действительно хотите закрыть вкладку?\", { yes: \"Да\", no: \"Нет\" }, tabId)\n    }\n  }\n  // Custom allert component\n  function handleOpenSwal(text, swalButtons, tabId) {\n    return (\n      swal({\n        text: text,\n        icon: \"warning\",\n        buttons: swalButtons\n      })\n        .then((click) => {\n          if (click === \"yes\") {\n            console.log(\"CLICK\", click)\n            handleCloseCurrentTabModal(tabId)\n          } else {\n            console.log(\"CLICK\", click)\n          }\n        })\n    )\n  }\n  // Close current tab from opened alert component\n  function handleCloseCurrentTabModal(tabId) {\n    var selectedTabData = tabData.get(tabId)\n    var commandJson =\n    {\n      commandType: \"completeTask\",\n      session_id: selectedTabData.session_id,\n      process_id: selectedTabData.process_id,\n      taskID: selectedTabData.taskID,\n      variables: {\n        userAction: { value: \"cancel\" },\n        userId: { value: userId },\n        userRole: { value: userRole }\n      }\n    }\n    // if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.docListIPR.length === 0){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.docListIPR === \"null\" && selectedTabData.formType === \"view\"){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else if(selectedTabData.taskType === \"showIPRForm\" && selectedTabData.userAction === \"ipr\" && selectedTabData.formType === \"edit\"){\n    //   // handleModalClose()\n    //   handleOpenSwal(\"Необходимо создать ИПР!\", {ok: \"Ок\"})\n    // } \n    // else {\n    sendFieldValues(commandJson)\n    // handleModalClose()\n    closeTab(tabId)\n    // }\n    // else if(selectedTabData.taskType === \"showDetailedForm\" && selectedTabData.formType === \"view\"){\n    //   alert(\"\")\n    // } \n  }\n  function sendFieldValues(commandJson) {\n    if (socket.readyState === socket.OPEN) {\n      clearTabData(commandJson.process_id)\n      if (commandJson.variables !== undefined) {\n        if (commandJson.variables[\"userAction\"][\"value\"] === \"cancel\") {\n          closeTab(selectedTab)\n          socket.send(JSON.stringify(commandJson))\n        }\n        else if (commandJson.variables[\"authorization\"] !== undefined) {\n          commandJson.variables[\"authorization\"][\"value\"] = \"Bearer \" + keycloak.token\n          socket.send(JSON.stringify(commandJson))\n          console.log(\"HOME AUTH\", commandJson)\n        }\n        else {\n          socket.send(JSON.stringify(commandJson))\n          console.log(\"HOME SEND\", commandJson)\n        }\n      }\n      else {\n        socket.send(JSON.stringify(commandJson))\n        console.log(\"HOME SEND\", commandJson)\n      }\n    }\n    else {\n      // alert(\"Проблема с соединением повторная попытка...\")\n      setSocket(null)\n    }\n    setCurrTaskId(\"\")\n  }\n  // wrap up menu items\n  function handleOpenMenuClick(name) {\n    // console.log(\"Event\", name)\n    for (var i = 0; i < menuItemStates.length; i++) {\n      if (menuItemStates[i].name === name) {\n        if (menuItemStates[i].state === true) {\n          menuItemStates[i].state = false\n        }\n        else {\n          menuItemStates[i].state = true\n        }\n      }\n    }\n    setOpennav(!opennav)\n  }\n  // launch process related to menu button\n  function handleMenuButtonClick(button) {\n    // console.log(\"Menu button clicked\", button)\n    if (button.name === \"ClearEnumData\" || button.name === \"Redeploy\") {\n      const commandJson =\n      {\n        commandType: button.commandType,\n        userRole: userRole,\n        userId: userId\n      }\n      sendFieldValues(commandJson)\n    }\n    else {\n      if (tabs.length >= 6) {\n        handleOpenSwal(\"ВНИМАНИЕ не открывайте более 6 вкладок это приводит к замедлению работы системы!\", { ok: \"Ок\" })\n      }\n      else {\n        var process_id = getUUID()\n        let updatedTabs = tabs.slice()\n        updatedTabs.push({ id: process_id, name: process_id, label: button.parentLabel + \" \" + tabCounter })\n        setTabs(updatedTabs)\n        setSelectedTab(process_id)\n\n        const commandJson =\n        {\n          commandType: button.commandType,\n          processKey: button.processKey,\n          process_id: process_id,\n          session_id: session_id,\n          variables: {\n            user_session_id: { value: session_id },\n            process_id: { value: process_id },\n            userAction: { value: \"findDocument\" },\n            docDef: { value: button.docDef },\n            userId: { value: userId },\n            userRole: { value: userRole },\n            tabLabel: { value: button.parentLabel },\n            authorization: { value: \"Bearer \" + keycloak.token },\n          }\n        }\n        sendFieldValues(commandJson)\n        console.log(\"Menu Button \", commandJson)\n        setTabCounter(tabCounter + 1)\n      }\n    }\n  }\n  function getUUID() {\n    const uuidv1 = require(\"uuid/v1\")\n    return uuidv1()\n  }\n  async function handleTabChange(event, newValue) {\n    setSelectedTab(newValue)\n    setShowScanComponent(false)\n    console.log(\"TAB CHANGE\", newValue)\n  }\n  function clearTabData(process_id) {\n    tabData.remove(process_id)\n    setCurrTaskId(\"\")\n    console.log(\"Clearing TabData\", tabData, \"ID\", process_id)\n  }\n  // close selected tab clear it\"s data from cache & change tab counter\n  function closeTab(process_id) {\n    if (process_id !== undefined) {\n      console.log(\"Closing TAB\", process_id)\n      let updatedTabs = tabs.slice()\n      for (var i = 0; i < updatedTabs.length; i++) {\n        if (updatedTabs[i].id === process_id) {\n          // console.log(\"INDEX\", i)\n          updatedTabs.splice(i, 1)\n        }\n      }\n      if (updatedTabs[0] === undefined) {\n        setSelectedTab(null)\n        setTabCounter(1)\n      }\n      else setSelectedTab(updatedTabs[0].id)\n      setTabs(updatedTabs)\n    }\n    // console.log(\"Closing TAB\", process_id)\n    let updatedTabs = tabs.slice()\n    for (i = 0; i < updatedTabs.length; i++) {\n      if (updatedTabs[i].id === process_id) {\n        // console.log(\"INDEX\", i)\n        updatedTabs.splice(i, 1)\n      }\n    }\n    if (Object.keys(updatedTabs).length === 0) {\n      setSelectedTab(null)\n      setTabCounter(1)\n    }\n    else {\n      setSelectedTab(updatedTabs[0].id)\n      setTabs(updatedTabs)\n    }\n  }\n  // Creating Menu Levels 1-3\n  function getLevel1Items(level1, index) {\n    // console.log(\"Creating Menu menuItemStates\", menuItemStates)\n    if (level1.level2 === undefined) {\n      return (\n        <ListItem button\n          className={classesnav.level1}\n          onClick={() => handleMenuButtonClick(level1)}\n        >\n          {/* <ListItemIcon> */}\n          <ExitToAppIcon />\n          {/* </ListItemIcon> */}\n          <div className={classesnav.listItemText}>{openDrawer === true ? level1.label : \"\"}</div>\n        </ListItem>\n      )\n    }\n    else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level1.name) {\n          return (\n            <List>\n              <ListItem button\n                className={classesnav.level1}\n                onClick={() => handleOpenMenuClick(level1.name)}\n              >\n                {/* <ListItemIcon> */}\n                <AddCircleIcon style={{ height: 20, width: 20 }} />\n                {/* </ListItemIcon> */}\n                <div className={classesnav.listItemText} style={{ \"fontWeight\": \"bold\" }}>{openDrawer === true ? level1.label : \"\"}</div>\n                {(menuItemStates[i].state === true) ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={menuItemStates[i].state} timeout=\"auto\" unmountOnExit>\n                {level1.level2.map((level2Item, index) =>\n                  getLevel2Items(level2Item, index)\n                )}\n              </Collapse>\n            </List>\n          )\n        }\n      }\n    }\n  }\n  function getLevel2Items(level2, index) {\n    // console.log(\"Level2\", level2)\n    if (level2.level3 === undefined) {\n      return (\n        <ListItem button\n          className={classesnav.level2}\n          onClick={() => handleMenuButtonClick(level2)}\n        >\n          <ExitToAppIcon style={{ height: 20 }} />\n          <div className={classesnav.listItemText}>{openDrawer === true ? level2.label : \"\"}</div>\n        </ListItem>\n      )\n    }\n    else {\n      for (var i = 0; i < menuItemStates.length; i++) {\n        if (menuItemStates[i].name === level2.name) {\n          return (\n            <List component=\"div\" disablePadding>\n              <ListItem button\n                className={classesnav.level2}\n                onClick={() => handleOpenMenuClick(level2.name)}\n              >\n                <AddCircleIcon style={{ height: 20 }} />\n                <div className={classesnav.listItemText} style={{ \"fontWeight\": \"bold\" }}>{openDrawer === true ? level2.label : \"\"}</div>\n                {(menuItemStates[i].state === true) ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>\n              <Collapse in={menuItemStates[i].state} timeout=\"auto\" unmountOnExit>\n                {level2.level3.map((level3Item, index) =>\n                  getLevel3Items(level3Item, index)\n                )}\n              </Collapse>\n            </List>\n          )\n        }\n      }\n    }\n  }\n  function getLevel3Items(level3, index) {\n    return (\n      <ListItem button\n        className={classesnav.level3}\n        onClick={() => handleMenuButtonClick(level3)}\n      >\n        <ExitToAppIcon style={{ height: 20 }} />\n        <div className={classesnav.listItemText}>{openDrawer === true ? level3.label : \"\"}</div>\n      </ListItem>\n    )\n  }\n  // Getting authenticated user profile\n  if (userId === null) {\n    keycloak.loadUserProfile().success(function (profile) {\n      let curUserId = profile.attributes.userId[0]\n      let curOrganizationId = profile.attributes.organizationId[0]\n      let curUserRole = profile.attributes.userRole[0]\n      let curUserFirstName = profile.firstName\n      let curUserLastName = profile.lastName\n      let curUserName = curUserFirstName + \" \" + curUserLastName.substring(0, 1) + \".\"\n      setUserId(curUserId)\n      setOrganizationId(curOrganizationId)\n      setUserRole(curUserRole)\n      setUserName(curUserName)\n      console.log(\"PROFILE: \", profile)\n    }).error(function () {\n      console.log(\"Failed to load user profile\")\n    })\n  }\n  if (menuItemStates.length === 0) {\n    return (\n      <div align=\"center\" style={{ paddingTop: 20 }}>\n        <CircularProgress />\n        <div>loading...</div>\n      </div>\n    )\n  }\n  // if (userId === null) return <div>No user</div>\n  // console.log(\"Home\", selectedTab)\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position=\"absolute\" className={clsx(classes.appBar, openDrawer && classes.appBarShift)}>\n        <Toolbar className={classes.toolbar}>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            className={clsx(classes.menuButton, openDrawer && classes.menuButtonHidden)}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography component=\"h1\" variant=\"h6\" color=\"inherit\" noWrap className={classes.title}>\n            ИСМСЭК\n          </Typography>\n          <AccountCircleIcon fontSize=\"large\" />\n          {!!keycloak.authenticated && (\n            <Typography>\n              {userName}\n              <IconButton color=\"inherit\" style={{ fontSize: 14 }} onClick={() => keycloak.logout()}>\n                Выйти\n              </IconButton>\n            </Typography>\n          )}\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        variant=\"permanent\"\n        classes={{\n          paper: clsx(classes.drawerPaper, !openDrawer && classes.drawerPaperClose),\n        }}\n        open={openDrawer}\n      >\n        <div className={classes.toolbarIcon}>\n          <IconButton onClick={handleDrawerClose}>\n            <ChevronLeftIcon />\n          </IconButton>\n        </div>\n        <Divider />\n        {routes.map((level1, index) => (\n          getLevel1Items(level1, index)\n        ))}\n      </Drawer>\n      <main className={classes.content}>\n        <a name=\"top\" />\n        <div className={classes.appBarSpacer} />\n        <Grid>\n          <AppBar position=\"fixed\" color=\"default\" style={{ paddingTop: 60, paddingLeft: (openDrawer === true) ? drawerWidth : 65 }}>\n            <Tabs\n              position=\"fixed\"\n              value={selectedTab}\n              onChange={handleTabChange}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n              variant=\"scrollable\"\n              scrollButtons=\"auto\"\n              aria-label=\"scrollable auto tabs example\"\n            >\n              {tabs.map((tab, index) => (\n                <Tab\n                  key={tab.id}\n                  label={<div style={{ fontSize: 11 }}>{tab.label}<IconButton onClick={() => handleCloseCurrentTab(tab.id)}>\n                    <CloseIcon style={{ fontSize: \"medium\", color: \"black\" }} />\n                  </IconButton></div>}\n                  value={tab.id}\n                  {...a11yProps(tab.id)}\n                >\n                </Tab>\n              ))}\n            </Tabs>\n          </AppBar>\n\n          {webSocketMessage !== null &&\n            tabs.map((tab, index) => (\n              <TabPanel\n                position=\"fixed\"\n                currentTab={tab.id}\n                selectedTab={selectedTab}\n                key={tab.id}\n                style={{ paddingTop: 60, paddingLeft: 10 }}\n              >\n                <MainComponent\n                  userId={userId}\n                  organizationId={organizationId}\n                  userRole={userRole}\n                  selectedTab={selectedTab}\n                  showScanComponent={showScanComponent}\n                  id={tab.id}\n                  key={tab.id}\n                  adminMessage={tabData.get(tab.id)}\n                  sendFieldValues={sendFieldValues}\n                  handleCloseCurrentTab={handleCloseCurrentTab}\n                  clearTabData={clearTabData}\n                  showScanComponentClick={showScanComponentClick}\n                  callSuccessToast={callSuccessToast}\n                  callErrorToast={callErrorToast}\n                // closeTab = {closeTab}\n                >\n                </MainComponent>\n              </TabPanel>\n            ))\n          }\n          {showScanComponent === true &&\n            <div id=\"scanner\" style={{ paddingLeft: 40, paddingBottom: 40, paddingRight: 40 }}>\n              {connectionFailed === false &&\n                <Button\n                  id=\"1234\"\n                  variant=\"outlined\"\n                  onClick={() => scannerButtonClick(\"scanImage\")}\n                  style={{\n                    margin: 3,\n                    backgroundColor: \"#D3D3FE\"\n                  }}\n                  startIcon={<ScannerIcon />}\n                >Сканировать\n                </Button>\n              }\n              {connectionFailed === true &&\n                <Button\n                  component=\"a\"\n                  href=\"../Scan_App_SetUp.msi\"\n                  download\n                  variant=\"outlined\"\n                  style={{\n                    margin: 3,\n                    backgroundColor: \"#D3D3FE\"\n                  }}\n                  startIcon={<GetAppIcon />}\n                >Скачать\n                </Button>\n              }\n              <Button\n                variant=\"outlined\"\n                onClick={() => scannerButtonClick(\"saveDocument\")}\n                style={{\n                  margin: 3,\n                  backgroundColor: \"#D1FBD1\"\n                }}\n                startIcon={<SaveIcon />}\n              >Сохранить\n              </Button>\n              <Button\n                variant=\"outlined\"\n                onClick={() => scannerButtonClick(\"loadPreviouslyScannedImages\")}\n                style={{\n                  margin: 3,\n                  backgroundColor: \"#D1FBD1\"\n                }}\n                startIcon={<CloudDownloadIcon />}\n              >Загрузить ранее отсканированные\n              </Button>\n              <input\n                accept=\"image/*\"\n                className={classes.input}\n                id=\"contained-button-file\"\n                multiple\n                type=\"file\"\n                onChange={uploadFile}\n                style={{ display: \"none\" }}\n              />\n              <label htmlFor=\"contained-button-file\">\n                <Button\n                  variant=\"outlined\"\n                  // color=\"primary\" \n                  component=\"span\"\n                  startIcon={<SearchIcon />}\n                  style={{\n                    margin: 3,\n                    backgroundColor: \"#D1FBD1\"\n                  }}\n                >Выбрать\n                </Button>\n              </label>\n\n              <Table size=\"small\">\n                <TableHead style={{ backgroundColor: \"#D3D3FE\" }}>\n                  <TableRow>\n                    <TableCell>Отсканированные/загруженные файлы</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  <TableRow>\n                    <TableCell>{returnImageList()}</TableCell>\n                  </TableRow>\n                </TableBody>\n              </Table>\n\n              <Table size=\"small\">\n                <TableHead style={{ backgroundColor: \"#D3D3FE\" }}>\n                  <TableRow>\n                    <TableCell>Загруженные файлы</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  <TableRow>\n                    <TableCell>{showLoading === true &&\n                      <Grid container direction=\"row\" justify=\"center\" spacing={0}>\n                        <Grid item xs={12}>\n                          <Card>\n                            <LinearProgress />\n                          </Card>\n                        </Grid>\n                      </Grid>\n                    }\n                      {returnLoadedImageList()}</TableCell>\n                  </TableRow>\n                </TableBody>\n              </Table>\n\n              <Modal\n                style={{ paddingLeft: \"500px\" }}\n                open={openModal}\n                onClose={handleCloseModal}\n                aria-labelledby=\"simple-modal-title\"\n                aria-describedby=\"simple-modal-description\"\n              >\n                <div className={classes.imagePaper}>\n                  <img name={selectedImg.name} height={selectedImg.height} width=\"auto\" src={selectedImg.src} />\n                </div>\n              </Modal>\n              <div>{showImage}</div>\n            </div>\n          }\n        </Grid>\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n          {\"Copyright © \"}\n          {new Date().getFullYear()}\n          {\".\"}\n        </Typography>\n        {/* <ToastContainer /> */}\n        <div><Toaster /></div>\n        <IconButton href=\"#top\" style={hrefStyleTop} className={classes.hrefStyleTop}>\n          <ArrowUpwardRoundedIcon />\n        </IconButton>\n        <IconButton href=\"#bottom\" style={hrefStyleBottom} className={classes.hrefStyleBottom}>\n          <ArrowDownwardIcon />\n        </IconButton>\n        <a name=\"bottom\" />\n      </main>\n    </div >\n  );\n};\n"]},"metadata":{},"sourceType":"module"}